/*Today is 7th of May,2022.
 *The website of daily promble is https://leetcode.cn/problems/minimum-genetic-mutation/.
 *Have a good day!ğŸŒ»ğŸŒ»ğŸŒ»
 */
class Solution {
public:
    int minDis=11;
    bool judge(string a,string b)
    {
        int count=0;
        for(int i=0;i<8;i++)
        {
            if(a[i]!=b[i])
            {
                count++;
            }
        }
        return count==1;
    }
    void createAdj(vector<vector<int>>& Adj,vector<string>& bank)
    {
        for(int i=0;i<bank.size();i++)
        {
            for(int j=i+1;j<bank.size();j++)
            {
                if(judge(bank[i],bank[j]))
                {
                    Adj[i].emplace_back(j);
                    Adj[j].emplace_back(i);
                }
            }
        }
    }
    void dfs(int start,int end,vector<vector<int>>& Adj,vector<bool>& vis,int dis)
    {
        if(start==end)
        {
            if(minDis>dis)
            {
                minDis=dis;
            }
        }
        else
        {
            for(int i=0;i<Adj[start].size();i++)
            {
                if(!vis[Adj[start][i]])
                {
                    //æ ‡è®°ä¸ºè®¿é—®è¿‡
                    vis[Adj[start][i]]=true;
                    dfs(Adj[start][i],end,Adj,vis,dis+1);
                    vis[Adj[start][i]]=false;
                }
            }
        }
    }
    int minMutation(string start, string end, vector<string>& bank) {
        //å‡è®¾startå’Œendä¹‹é—´çš„å·®åˆ«æœ‰kå¤„ï¼Œç”±äºä¸€æ¬¡åªèƒ½æ”¹å˜ä¸€ä¸ªå­—ç¬¦ï¼Œå› æ­¤è‡³å°‘éœ€è¦kæ­¥æ‰èƒ½ä»startå˜åˆ°endã€‚
        //bankä¸­çš„æ¯ä¸ªåºåˆ—è‡³å¤šä½¿ç”¨ä¸€æ¬¡
        //æœ‰ç‚¹ç±»ä¼¼äºå›¾çš„ç®—æ³•ï¼Œå¯»æ‰¾æœ€çŸ­è·¯å¾„
        //å…ˆæ‰¾åˆ°å„åºåˆ—ä¹‹é—´çš„ç›¸é‚»å…³ç³»(ç›¸å·®ä¸€ä¸ªå­—ç¬¦)
        //å…ˆéå†bankï¼Œè¿›è¡Œåˆæ­¥çš„æ•°æ®å¤„ç†
        bool haveStart=false;
        bool haveEnd=false;
        int indexStart=0;
        int indexEnd=0;
        for(int i=0;i<bank.size();i++)
        {
            if(bank[i]==start)
            {
                haveStart=true;
                indexStart=i;
            }
            if(bank[i]==end)
            {
                haveEnd=true;
                indexEnd=i;
            }
        } 
        if(haveEnd==false)
        {
            //bankä¸­æ²¡æœ‰ç»ˆç‚¹
            return -1;
        }
        if(haveStart==false)
        {
            //é˜²æ­¢é‡å¤åŠ å…¥èµ·ç‚¹
            bank.emplace_back(start);
            indexStart=bank.size()-1;
        }
        vector<vector<int>>Adj(bank.size());
        vector<bool>vis(bank.size(),false);
        createAdj(Adj,bank);
        vis[indexStart]=true;
        dfs(indexStart,indexEnd,Adj,vis,0);
        return minDis>10?-1:minDis;
    }
};
